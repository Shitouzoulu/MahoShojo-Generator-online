# 生产环境配置 - 阿里云部署
# 复制此文件为 .env.production 并根据实际情况修改

# 应用环境
NODE_ENV=production
PORT=3000
FRONTEND_URL=https://your-domain.com

# 数据库配置 - 阿里云RDS
DB_HOST=your-rds-instance.mysql.rds.aliyuncs.com
DB_USER=your_db_user
DB_PASSWORD=your_secure_password_here
DB_NAME=mahoshojo
DB_PORT=3306

# 数据库连接池优化配置
DB_CONNECTION_LIMIT=100
DB_QUEUE_LIMIT=200
DB_MIN_IDLE=20
DB_MAX_IDLE=40
DB_ACQUIRE_TIMEOUT=60000
DB_TIMEOUT=60000
DB_MAX_RETRIES=5
DB_RETRY_DELAY=1000

# AI 提供商配置
AI_PROVIDERS_CONFIG='[
  {
    "name": "gemini_provider", 
    "apiKey": "AIzaSyDnW4xtsgEogA8fQ9Rkz9o2iIi3HnqNw9E",
    "baseUrl": "https://generativelanguage.googleapis.com/v1beta",
    "model": "gemini-2.5-flash"
  }
]'

# JWT 配置 - 生产环境必须使用强密钥
JWT_SECRET=b79d75fd929a5638b97885f042ab5378583f219473c9ec7561e65d3e37fe98e4
JWT_EXPIRES_IN=24h

# 安全配置
SESSION_SECRET=your_session_secret_here
COOKIE_SECURE=true
COOKIE_HTTPONLY=true

# 文件上传配置
MAX_FILE_SIZE=10485760
UPLOAD_PATH=/var/www/uploads

# Redis 配置 - 阿里云Redis实例
REDIS_HOST=your-redis-instance.redis.rds.aliyuncs.com
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0

# 队列系统配置
QUEUE_MAX_REQUESTS_PER_MINUTE=20
QUEUE_USER_WAIT_TIME_SECONDS=15

# AI负载均衡配置
AI_LOAD_BALANCE_STRATEGY=round_robin

# 日志配置
LOG_LEVEL=info
LOG_FILE=/var/log/mahoshojo/app.log

# 监控配置
ENABLE_METRICS=true
METRICS_PORT=9090

# 备份配置
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * * # 每天凌晨2点
BACKUP_RETENTION_DAYS=7

# 邮件配置（可选）
SMTP_HOST=smtp.aliyun.com
SMTP_PORT=465
SMTP_USER=your_email@your-domain.com
SMTP_PASS=your_email_password
SMTP_SECURE=true

# 第三方服务配置
GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX
BAIDU_ANALYTICS_ID=your_baidu_id

# 性能优化配置
ENABLE_COMPRESSION=true
ENABLE_CACHING=true
CACHE_TTL=3600

# 错误报告配置
SENTRY_DSN=your_sentry_dsn_here
ENABLE_ERROR_REPORTING=true
