# 简化生产环境配置 - 单ECS部署
# 复制此文件为 .env.production 并根据实际情况修改

# 应用环境
NODE_ENV=production
PORT=3000
FRONTEND_URL=http://YOUR_ECS_IP:3000

# 数据库配置 - 本地Docker MySQL
DB_HOST=db
DB_USER=mahoshojo
DB_PASSWORD=mahoshojo123
DB_NAME=mahoshojo
DB_PORT=3306

# 数据库连接池配置（简化版）
DB_CONNECTION_LIMIT=20
DB_QUEUE_LIMIT=50
DB_MIN_IDLE=5
DB_MAX_IDLE=10
DB_ACQUIRE_TIMEOUT=30000
DB_TIMEOUT=30000
DB_MAX_RETRIES=3
DB_RETRY_DELAY=1000

# AI 提供商配置 - 请填入你的实际API密钥
AI_PROVIDERS_CONFIG='[
  {
    "name": "gemini_provider", 
    "apiKey": "your_gemini_api_key_here",
    "baseUrl": "https://generativelanguage.googleapis.com/v1beta",
    "model": "gemini-2.5-flash"
  }
]'

# JWT 配置 - 生产环境必须使用强密钥
JWT_SECRET=mahoshojo_jwt_secret_2024_production_very_secure_key_32_chars
JWT_EXPIRES_IN=24h

# 安全配置
SESSION_SECRET=mahoshojo_session_secret_2024_production
COOKIE_SECURE=false
COOKIE_HTTPONLY=true

# 文件上传配置
MAX_FILE_SIZE=10485760
UPLOAD_PATH=/app/uploads

# Redis 配置 - 本地Docker Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# 队列系统配置
QUEUE_MAX_REQUESTS_PER_MINUTE=20
QUEUE_USER_WAIT_TIME_SECONDS=15

# AI负载均衡配置
AI_LOAD_BALANCE_STRATEGY=round_robin

# 日志配置
LOG_LEVEL=info
LOG_FILE=/app/logs/app.log

# 监控配置
ENABLE_METRICS=false
METRICS_PORT=9090

# 备份配置
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=7

# 邮件配置（可选）
SMTP_HOST=smtp.aliyun.com
SMTP_PORT=465
SMTP_USER=your_email@your-domain.com
SMTP_PASS=your_email_password
SMTP_SECURE=true

# 第三方服务配置（可选）
GOOGLE_ANALYTICS_ID=
BAIDU_ANALYTICS_ID=

# 性能优化配置
ENABLE_COMPRESSION=true
ENABLE_CACHING=true
CACHE_TTL=3600

# 错误报告配置（可选）
SENTRY_DSN=
ENABLE_ERROR_REPORTING=false
